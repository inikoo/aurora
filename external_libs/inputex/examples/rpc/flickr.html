<?xml version="1.0" encoding="UTF-8"?>
<html>
<head>
<title>inputEx RPC</title>

<!-- YUI CSS -->
<link rel="stylesheet" type="text/css" href="../../lib/yui/reset-fonts/reset-fonts.css">
<link rel="stylesheet" type="text/css" href="../../lib/yui/container/assets/container.css"> 
<link rel="stylesheet" type="text/css" href="../../lib/yui/assets/skins/sam/skin.css">

<!-- InputEx CSS -->
<link type='text/css' rel='stylesheet' href='../../css/inputEx.css' />

<style>
#mainBox {
	margin:40px auto;
	width: 80%;
	background-color: #ccccff;
	padding: 20px;
}
p {
	margin: 10px;
}
strong {
	font-weight: bold;
}

.photo {
	width: 240px;
	height: 240px;
	float: left;
}

.photo img {
	margin: auto auto;
}

</style>
</head>

<body class="yui-skin-sam">
	
	<div id='mainBox'>
		
		<p>This example uses the <a href="smd/flickr.smd">Flickr SMD</a> to generate the form using inputEx.RPC.generateServiceForm.</p>
		
		<p>The request is handled by YUI-RPC (using jsonp), which callbacks to our simple viewing method.</p>
		
		<div id='formContainer'>
		</div>
		
		<p>Results :</p>
		<div id='treeContainer'>
		</div>
		
		<div style='clear: both;'></div>
		
	</div>

<!-- YUI -->
<script type="text/javascript" src="../../lib/yui/utilities/utilities.js"></script>
<script type="text/javascript" src="../../lib/yui/get/get-min.js"></script>
<script type="text/javascript" src="../../lib/yui/json/json-min.js"></script>

<!-- YUI-RPC -->
<script type="text/javascript" src="../../js/rpc/yui-rpc.js"></script>

<!-- inputEx -->
<script type="text/javascript" src="../../js/inputex.js"></script>
<script type="text/javascript" src="../../js/Field.js"></script>
<script type="text/javascript" src="../../js/Group.js"></script>
<script type="text/javascript" src="../../js/Form.js"></script>
<script type="text/javascript" src="../../js/fields/StringField.js"></script>
<script type="text/javascript" src="../../js/fields/SelectField.js"></script>
<script type="text/javascript" src="../../js/fields/IntegerField.js"></script>
<script type="text/javascript" src="../../js/json-schema.js"></script> 
<script type="text/javascript" src="../../js/rpc/inputex-rpc.js"></script> 

<script>

YAHOO.util.Event.onDOMReady(function() {

	var service = new YAHOO.rpc.Service("smd/flickr.smd",{ 
		success: function() {
			
			// Creates the form from service.getPublicPhotos method
			inputEx.RPC.generateServiceForm(service.getPublicPhotos, { parentEl: 'formContainer' },{
					success: function(results) {
						
						// Get the result and display the images
						var treeContainer = YAHOO.util.Dom.get('treeContainer');
						treeContainer.innerHTML = "";
						var list = results.photos.photo;
						for(var i = 0 ; i < list.length ; i++) {
							var photo = list[i];
							var url = "http://farm"+photo.farm+".static.flickr.com/"+photo.server+"/"+photo.id+"_"+photo.secret+"_m.jpg";
							treeContainer.appendChild( inputEx.cn('div', {className: 'photo'}, null, "<img src='"+url+"' />") );
						}	
						
					}
				});
				
		}
	});

});

</script>

</body>
</html>
