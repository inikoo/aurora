ALTER TABLE `Dashboard Widget Bridge` ADD `Dashboard Widget Name` VARCHAR(128) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL , ADD `Dashboard Widget Description` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL , ADD INDEX (`Dashboard Widget Name`) ;
ALTER TABLE `user right scope bridge` CHANGE `Scope` `Scope` ENUM('Store','Warehouse','Supplier','Website','Project','Service') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'Store';
ALTER TABLE `Site Dimension` CHANGE `Site Store Key` `Site Store Key` SMALLINT(5) UNSIGNED NULL DEFAULT NULL;
ALTER TABLE `Site Dimension` ADD `Site Service Project Key` MEDIUMINT UNSIGNED NULL DEFAULT NULL AFTER `Site Store Key`, ADD `Site Service Key` MEDIUMINT UNSIGNED NULL DEFAULT NULL AFTER `Site Service Project Key`;
ALTER TABLE `Site Dimension` CHANGE `Site Service Key` `Site Project Key` MEDIUMINT(8) UNSIGNED NULL DEFAULT NULL;
// add indexed to prev 2 fields
ALTER TABLE `Site Dimension` CHANGE `Site Default Number See Also Links` `Site Default Number See Also Links` TINYINT(4) UNSIGNED NULL DEFAULT NULL;
ALTER TABLE `Site Dimension` ADD `Site Parent` ENUM('Store','Project') NOT NULL DEFAULT 'Store' AFTER `Site Key`, ADD INDEX (`Site Parent`) ;
ALTER TABLE `Page Store Dimension` CHANGE `Page Store Key` `Page Store Key` SMALLINT(5) UNSIGNED NULL DEFAULT NULL; 
ALTER TABLE `Page Store Dimension` ADD `Page Site Parent` ENUM('Store','Project') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'Store' AFTER `Page Site Key`, ADD INDEX (`Page Site Parent`) ;
ALTER TABLE `Page Store Dimension` ADD `Page Service Project Key` SMALLINT UNSIGNED NULL DEFAULT NULL AFTER `Page Store Key`, ADD `Page Project Key` SMALLINT UNSIGNED NULL DEFAULT NULL AFTER `Page Service Project Key`;
// add indexed to prev 2 fields
ALTER TABLE `Account Dimension` ADD `Google API Client ID` VARCHAR(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL , ADD `Google API Service Account Name` VARCHAR(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL ;
ALTER TABLE `Site Dimension` ADD `Site Google Analytics Profile ID` VARCHAR(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL ;

//=====

ALTER TABLE `Deal Component Dimension` CHANGE `Deal Component XHTML Name Label` `Deal Component XHTML Name Label` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL; 
ALTER TABLE `Deal Component Dimension` CHANGE `Deal Component XHTML Terms Description Label` `Deal Component XHTML Terms Description Label` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL; 
ALTER TABLE `Deal Component Dimension` CHANGE `Deal Component XHTML Allowance Description Label` `Deal Component XHTML Allowance Description Label` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL; 
ALTER TABLE `Deal Component Dimension` CHANGE `Deal Component Replace` `Deal Component Replace` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL; 

ALTER TABLE `Deal Dimension` CHANGE `Deal Terms Type` `Deal Terms Type` ENUM('Every Order','Family For Every Quantity Any Product Ordered','Department For Every Quantity Any Product Ordered','Voucher AND Order Interval','Amount AND Order Number','Amount AND Order Interval','Voucher AND Order Number','Voucher AND Amount','Amount','Order Total Net Amount','Order Total Net Amount AND Order Number','Order Total Net Amount AND Shipping Country','Order Total Net Amount AND Order Interval','Order Items Net Amount','Order Items Net Amount AND Order Number','Order Items Net Amount AND Shipping Country','Order Items Net Amount AND Order Interval','Order Total Amount','Order Total Amount AND Order Number','Order Total Amount AND Shipping Country','Order Total Amount AND Order Interval','Order Interval','Product Quantity Ordered','Family Quantity Ordered','Order Number','Shipping Country','Voucher','Department For Every Quantity Ordered','Family For Every Quantity Ordered','Product For Every Quantity Ordered')CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL;
ALTER TABLE `Deal Component Dimension` CHANGE `Deal Component Terms Type` `Deal Component Terms Type` ENUM('Every Order','Family For Every Quantity Any Product Ordered','Department For Every Quantity Any Product Ordered','Voucher AND Order Interval','Amount AND Order Number','Amount AND Order Interval','Voucher AND Order Number','Voucher AND Amount','Amount','Order Total Net Amount','Order Total Net Amount AND Order Number','Order Total Net Amount AND Shipping Country','Order Total Net Amount AND Order Interval','Order Items Net Amount','Order Items Net Amount AND Order Number','Order Items Net Amount AND Shipping Country','Order Items Net Amount AND Order Interval','Order Total Amount','Order Total Amount AND Order Number','Order Total Amount AND Shipping Country','Order Total Amount AND Order Interval','Order Interval','Product Quantity Ordered','Family Quantity Ordered','Order Number','Shipping Country','Voucher','Department For Every Quantity Ordered','Family For Every Quantity Ordered','Product For Every Quantity Ordered') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL; 

ALTER TABLE `Deal Component Dimension` CHANGE `Deal Component Trigger` `Deal Component Trigger` ENUM('Family','Product','Order','Customer') CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL; 

ALTER TABLE `Order Transaction Fact` CHANGE `Current Dispatching State` `Current Dispatching State` ENUM('Out of Stock in Basket','In Process by Customer','Submitted by Customer','In Process','Ready to Pick','Picking','Ready to Pack','Ready to Ship','Dispatched','Unknown','Packing','Packed','Packed Done','Cancelled','No Picked Due Out of Stock','No Picked Due No Authorised','No Picked Due Not Found','No Picked Due Other','Suspended','Cancelled by Customer') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'Unknown';

ALTER TABLE `Deal Component Dimension` ADD `Deal Component Allowance Target Type` ENUM('Items','No Items') NOT NULL DEFAULT 'Items' AFTER `Deal Component Allowance Target`, ADD INDEX (`Deal Component Allowance Target Type`) ;
update `Deal Component Dimension`  set  `Deal Component Allowance Target Type`='No Items' where `Deal Component Allowance Target` in ('Shipping', 'Charges') ;
update `Deal Component Dimension`  set  `Deal Component Allowance Target Type`='No Items' where `Deal Component Allowance Description` in ('Get one from family') ;
update `Deal Component Dimension` set `Deal Component Status`='Finish' where `Deal Component Record Type`='Historic';
ALTER TABLE `Order No Product Transaction Fact` CHANGE `Transaction Type` `Transaction Type` ENUM('Credit','Unknown','Refund','Shipping','Charges','Adjust','Other','Deal','Insurance','Discount') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'Unknown'; 
ALTER TABLE `Order Dimension` ADD `Order Deal Amount Off` DECIMAL(12,2) NOT NULL DEFAULT '0.00' COMMENT 'Net' AFTER `Order Insurance Tax Amount`; 
ALTER TABLE `Deal Component Dimension` CHANGE `Deal Component Allowance Type` `Deal Component Allowance Type` ENUM('Get Cheapest Free','Amount Off','Percentage Off','Get Free','Get Same Free','Credit') CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL; 
ALTER TABLE `Order Dimension` ADD `Order Deal Amount Off` DECIMAL(12,2) NOT NULL DEFAULT '0.00' COMMENT 'Net' AFTER `Order Insurance Tax Amount`; 
ALTER TABLE `Deal Dimension` CHANGE `Deal Trigger` `Deal Trigger` ENUM('Order','Department','Family','Product','Customer','Customer Category','Customer List') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL; 
ALTER TABLE `Deal Component Dimension` CHANGE `Deal Component Trigger` `Deal Component Trigger` ENUM('Family','Product','Order','Customer','Customer Category','Customer List') CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL;
ALTER TABLE `Deal Dimension` ADD `Deal Term Allowances` TEXT NULL AFTER `Deal Description`; 
update `Deal Component Dimension` set `Deal Component XHTML Terms Description Label`=`Deal Component Terms Description` where `Deal Component XHTML Terms Description Label`='';
ALTER TABLE `Deal Dimension` CHANGE `Deal Terms Type` `Deal Terms Type` ENUM('Department Quantity Ordered','Every Order','Family For Every Quantity Any Product Ordered','Department For Every Quantity Any Product Ordered','Voucher AND Order Interval','Amount AND Order Number','Amount AND Order Interval','Voucher AND Order Number','Voucher AND Amount','Amount','Order Total Net Amount','Order Total Net Amount AND Order Number','Order Total Net Amount AND Shipping Country','Order Total Net Amount AND Order Interval','Order Items Net Amount','Order Items Net Amount AND Order Number','Order Items Net Amount AND Shipping Country','Order Items Net Amount AND Order Interval','Order Total Amount','Order Total Amount AND Order Number','Order Total Amount AND Shipping Country','Order Total Amount AND Order Interval','Order Interval','Product Quantity Ordered','Family Quantity Ordered','Order Number','Shipping Country','Voucher','Department For Every Quantity Ordered','Family For Every Quantity Ordered','Product For Every Quantity Ordered') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL;

ALTER TABLE `Deal Component Dimension` CHANGE `Deal Component Trigger` `Deal Component Trigger` ENUM('Department','Family','Product','Order','Customer','Customer Category','Customer List') CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL;
ALTER TABLE `Deal Component Dimension` CHANGE `Deal Component Terms Type` `Deal Component Terms Type` ENUM('Department Quantity Ordered','Every Order','Family For Every Quantity Any Product Ordered','Department For Every Quantity Any Product Ordered','Voucher AND Order Interval','Amount AND Order Number','Amount AND Order Interval','Voucher AND Order Number','Voucher AND Amount','Amount','Order Total Net Amount','Order Total Net Amount AND Order Number','Order Total Net Amount AND Shipping Country','Order Total Net Amount AND Order Interval','Order Items Net Amount','Order Items Net Amount AND Order Number','Order Items Net Amount AND Shipping Country','Order Items Net Amount AND Order Interval','Order Total Amount','Order Total Amount AND Order Number','Order Total Amount AND Shipping Country','Order Total Amount AND Order Interval','Order Interval','Product Quantity Ordered','Family Quantity Ordered','Order Number','Shipping Country','Voucher','Department For Every Quantity Ordered','Family For Every Quantity Ordered','Product For Every Quantity Ordered') CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL;


CREATE TABLE IF NOT EXISTS `Voucher Dimension` (
  `Voucher Key` mediumint(8) unsigned NOT NULL,
  `Voucher Store Key` mediumint(8) unsigned NOT NULL,
  `Voucher Deal Key` mediumint(8) unsigned DEFAULT NULL,
  `Voucher Code` varchar(32) NOT NULL,
  `Voucher Type` enum('Public','Private') NOT NULL DEFAULT 'Public',
  `Voucher Subject Type` enum('Order','Customer') NOT NULL DEFAULT 'Order',
  `Voucher Subject Key Metadata` mediumint(8) unsigned DEFAULT NULL,
  `Voucher Usage Limit per Customer` smallint(5) unsigned DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE IF NOT EXISTS `Voucher Order Bridge` (
  `Voucher Key` mediumint(8) unsigned NOT NULL,
  `Order Key` mediumint(8) unsigned NOT NULL,
  `Date` datetime DEFAULT NULL,
  `Deal Key` mediumint(8) unsigned NOT NULL,
  `Customer Key` mediumint(8) unsigned DEFAULT NULL,
  `State` enum('In Process','Cancelled','Consolidated') NOT NULL DEFAULT 'In Process'
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


//important:
//Order Transaction Deal Bridge: add Deal Component Key to primary key!!!!! do it manually in phpmuyadmin
//NOW that can be more than one Transaction Deal Bridge check oif adding discuanst manually actually worls plis

ALTER TABLE `Order Dimension` ADD `Order Invoiced Items Tax Amount` DECIMAL(16,2) NOT NULL DEFAULT '0.00' AFTER `Order Invoiced Items Amount`;
ALTER TABLE `Order Dimension` ADD `Order Invoiced Shipping Tax Amount` DECIMAL(16,2) NOT NULL DEFAULT '0.00' AFTER `Order Invoiced Shipping Amount`;
ALTER TABLE `Order Dimension` ADD `Order Invoiced Charges Tax Amount` DECIMAL(16,2) NOT NULL DEFAULT '0.00' AFTER `Order Invoiced Charges Amount`;
ALTER TABLE `Order Dimension` ADD `Order Invoiced Insurance Tax Amount` DECIMAL(16,2) NOT NULL DEFAULT '0.00' AFTER `Order Invoiced Insurance Amount`;
ALTER TABLE `Order Dimension` ADD `Order Invoiced Items Tax Amount` DECIMAL(16,2) NOT NULL DEFAULT '0.00' AFTER `Order Invoiced Items Amount`;


UPDATE `Table Dimension` SET `Table Export Fields` = '`Product Main Department Code`|1,`Product Family Code`|1,P.`Product ID`|1,`Product Code`|1,`Product Units Per Case`|1,`Product Name`|1,`Product Price`|1,`Product RRP`|1,Image URL|0,`Product Tariff Code`|0,`Product Duty Rate`|0,`Product Total Acc Invoiced Amount`|0,`Product 1 Year Acc Invoiced Amount`|0' WHERE `Table Dimension`.`Table Key` = 9; 
UPDATE `Table Dimension` SET `Table Export Fields` = '`Product Department Code`|1,`Product Department Name`|1,`Product Department Total Acc Invoiced Amount`|0,`Product Department 1 Year Acc Invoiced Amount`|0' WHERE `Table Dimension`.`Table Key` = 7; 
UPDATE `Table Dimension` SET `Table Export Fields` = '`Product Family Code`|1,`Product Family Name`|1,`Product Family Total Acc Invoiced Amount`|0,`Product Family 1 Year Acc Invoiced Amount`|0' WHERE `Table Dimension`.`Table Key` = 8; 

from here 25/04/2015 09:19
ALTER TABLE `Order Transaction Fact` ADD `Refund Quantity` FLOAT NOT NULL DEFAULT '0' AFTER `Invoice Quantity`; 
ALTER TABLE `Order Post Transaction Dimension` CHANGE `Delivery Note Key` `Delivery Note Key` MEDIUMINT(8) UNSIGNED NULL DEFAULT NULL; 
ALTER TABLE `Order No Product Transaction Fact` ADD `Transaction Refund Net Amount` DECIMAL(16,2) NOT NULL DEFAULT '0.00' AFTER `Transaction Invoice Tax Amount`, ADD `Transaction Refund Tax Amount` DECIMAL(16,2) NOT NULL DEFAULT '0.00' AFTER `Transaction Refund Net Amount`;
ALTER TABLE `Order Post Transaction Dimension` ADD `Refund Key` MEDIUMINT UNSIGNED NULL DEFAULT NULL AFTER `Delivery Note Key`; 
ALTER TABLE `Invoice Dimension` ADD `Invoice Credit Net Amount` DECIMAL(16,2) NOT NULL DEFAULT '0.00' AFTER `Invoice Insurance Net Amount`; 
ALTER TABLE `Invoice Dimension` ADD `Invoice Credit Tax Amount` DECIMAL(16,2) NOT NULL DEFAULT '0.00' AFTER `Invoice Insurance Tax Amount`; 