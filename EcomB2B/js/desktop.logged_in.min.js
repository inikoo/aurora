function validate_signed_integer(a,b){return $.isNumeric(a)?a>b?{"class":"invalid",type:"too_big"}:a<0?{"class":"invalid",type:"negative"}:Math.floor(a)!=a&&{"class":"invalid",type:"not_integer"}:{"class":"invalid",type:"not_integer"}}function save_item_qty_change(a){if(!$(a).hasClass("fa-exclamation-circle")){$(a).addClass("fa-spinner fa-spin");var b=$(a).closest("span").find("input");if(b.prop("readonly",!0),$(a).hasClass("fa-plus")){var c="fa-plus";if(isNaN(b.val())||""==b.val())var d=1;else d=parseFloat(b.val())+1;b.val(d).addClass("discreet")}else if($(a).hasClass("fa-minus")){if(isNaN(b.val())||""==b.val()||0==b.val())var d=0;else d=parseFloat(b.val())-1;b.val(d).addClass("discreet");var c="fa-minus"}else{d=parseFloat(b.val());var c="fa-save"}""==d&&(d=0);var e=$(a).closest("span").data("settings"),f="ar_web_basket.php?tipo=update_item&product_id="+e.item_key+"&qty="+d+"&webpage_key="+$("#webpage_data").data("webpage_key")+"&page_section_type=Basket";$.getJSON(f,function(d){if(b.prop("readonly",!1).removeClass("discreet"),200==d.state){$(a).closest("span").find("i.plus").removeClass("fa-spinner fa-spin fa-save").addClass("fa-plus"),$(a).closest("span").find("i.minus").removeClass("hide fa-spinner fa-spin").addClass("fa-minus"),d.order_empty?$("#basket_go_to_checkout").css({display:"none"}):$("#basket_go_to_checkout").css({display:"block"});for(var e in d.metadata.class_html)$("."+e).html(d.metadata.class_html[e]);for(var e in d.metadata.hide)$("."+d.metadata.hide[e]).addClass("hide");for(var e in d.metadata.show)$("."+d.metadata.show[e]).removeClass("hide");for(var e in d.metadata.add_class)$("."+e).addClass(d.metadata.add_class[e]);for(var e in d.metadata.remove_class)$("."+e).removeClass(d.metadata.remove_class[e]);$(a).closest("tr").find(".item_amount").html(d.to_charge),d.quantity>0,0==d.quantity&&(d.quantity="");for(var e in d.discounts_data)$("#transaction_deal_info_"+e).html(d.discounts_data[e].deal_info),$("#transaction_item_net_"+e).html(d.discounts_data[e].item_net);""!=d.analytics.action&&(ga("auTracker.ec:addProduct",d.analytics.product_data),ga("auTracker.ec:setAction",d.analytics.action),ga("auTracker.send","event","UX","click",d.analytics.event));for(var e in d.metadata.deleted_otfs)$("#transaction_item_net_"+d.metadata.deleted_otfs[e]).closest("tr").remove();if(console.log(d.metadata.deleted_otfs.length),d.metadata.new_otfs.length>0||d.metadata.deleted_otfs.length>0){var f="ar_web_basket.php?tipo=get_items_html&device_prefix="+$("body").data("device_prefix");$.getJSON(f,function(a){200==a.state&&$(".basket_order_items").html(a.html)})}}else 201==d.state||400==d.state&&($(a).removeClass("fa-spinner fa-spin fa-disk").addClass(c),swal(d.msg))})}}$(function(){$(document).on("click",".reminder",function(a){if(!$(this).hasClass("lock")){$(this).addClass("lock");var b=$(this);if(b.hasClass("far")){b.removeClass("far").addClass("fas").attr("title",b.data("label_remove_notification"));var c="ar_web_out_of_stock_reminders.php?tipo=add_out_of_stock_reminder&pid="+b.data("product_id")}else{b.removeClass("fas").addClass("far").attr("title",b.data("label_add_notification"));var c="ar_web_out_of_stock_reminders.php?tipo=remove_out_of_stock_reminder&out_of_stock_reminder_key="+b.data("out_of_stock_reminder_key")}$.getJSON(c,function(a){200==a.state&&(b.removeClass("lock"),b.data("out_of_stock_reminder_key",a.out_of_stock_reminder_key))})}}),$(document).on("click",".favourite",function(a){var b=$(this);b.hasClass("far")?b.removeClass("far").addClass("fas").addClass("marked"):b.removeClass("fa fas").addClass("far").removeClass("marked");var c="ar_web_favourites.php?tipo=update_favourite&pid="+$(this).data("product_id")+"&favourite_key="+$(this).data("favourite_key");$.getJSON(c,function(a){a.favourite_key?ga("auTracker.send","event","Favourites","add",b.data("product_code")):ga("auTracker.send","event","Favourites","remove",b.data("product_code")),b.data("favourite_key",a.favourite_key)})}),$("#logout").on("click",function(){var a=new FormData;a.append("tipo","logout"),a.append("webpage_key",$("#webpage_data").data("webpage_key")),$.ajax({url:"/ar_web_logout.php",type:"POST",data:a,dataType:"json",cache:!1,contentType:!1,processData:!1,complete:function(){},success:function(a){"200"==a.state?(ga("auTracker.send","event","Login","logout"),location.reload()):"400"==a.state&&swal(a.msg)},error:function(){}})}),$(".label_when_log_out").each(function(a){var b=10,c=$(this),d=c.html().length;if(b<d){var e=parseInt(c.css("font-size")),f=e*b/d;c.css("font-size",f)}}),$(".order_button_text").each(function(a){var b=9,c=$(this),d=c.html().length;if(b<d){var e=parseInt(c.css("font-size")),f=e*b/d;c.css("font-size",f)}}),$(".item_name").each(function(a){var b=50,c=$(this),d=c.html().length;if(b<d){var e=parseInt(c.css("font-size")),f=e*b/d;c.css("font-size",f)}})}),$(function(){$(".modal-opener").on("click",function(){return $("#sky-form-modal-overlay").length||$("body").append('<div id="sky-form-modal-overlay" class="sky-form-modal-overlay"></div>'),$("#sky-form-modal-overlay").on("click",function(){$("#sky-form-modal-overlay").fadeOut(),$(".sky-form-modal").fadeOut()}),form=$($(this).attr("href")),$("#sky-form-modal-overlay").fadeIn(),form.css("top","50%").css("left","50%").css("margin-top",-form.outerHeight()/2).css("margin-left",-form.outerWidth()/2).fadeIn(),!1}),$(".modal-closer").on("click",function(){return $("#sky-form-modal-overlay").fadeOut(),$(".sky-form-modal").fadeOut(),!1}),$(document).on("click",".payment_method_button",function(a){$(".payment_method_button").addClass("discreet bg-gray-light border-gray-dark").removeClass("bg-blue-light border-blue-dark").css({opacity:.2}),$(this).removeClass("discreet bg-gray-light border-gray-dark").addClass("bg-blue-light border-blue-dark").css({opacity:1}),$(".payment_method_block").addClass("hide"),$("#"+$(this).data("tab")).removeClass("hide")}),$(document).on("click",".ordering_button",function(a){save_item_qty_change(this)}),$(document).on("mouseenter",".order_row .label",function(a){var b=$(this).closest(".order_row").find(".order_input");""==b.val()&&b.val(1)}),$(document).on("mouseleave",".order_row .label",function(a){var b=$(this).closest(".order_row").find(".order_input");""!=b.data("ovalue")||b.is("[readonly]")||b.val("")}),$(document).on("click",".order_row .label",function(a){var b=$(this),c=$(this).closest(".order_row");if(!$(this).find("i").hasClass("fa-spinner")){var d=c.find(".order_input"),e=d.val();$(this).find("i").removeClass("fa-hand-pointer").addClass("fa-spinner fa-spin  "),d.prop("readonly",!0),e>0&&c.addClass("ordered").removeClass("empty");var f="ar_web_basket.php?tipo=update_item&product_id="+$(this).closest(".product_container").data("product_id")+"&qty="+e+"&webpage_key="+$("#webpage_data").data("webpage_key")+"&page_section_type=Family";$.getJSON(f,function(a){if(200==a.state){for(var e in a.metadata.class_html)$("."+e).html(a.metadata.class_html[e]);a.quantity>0?(b.html($("#ordering_settings").data("labels").ordered),c.addClass("ordered").removeClass("empty")):(b.html($("#ordering_settings").data("labels").order),c.removeClass("ordered").addClass("empty")),0==a.quantity&&(a.quantity=""),d.val(a.quantity).data("ovalue",a.quantity).prop("readonly",!1),""!=a.analytics.action&&(ga("auTracker.ec:addProduct",a.analytics.product_data),ga("auTracker.ec:setAction",a.analytics.action),ga("auTracker.send","event","UX","click",a.analytics.event))}else 201==a.state})}}),$(".order_input").on("input propertychange",function(){$(this).val($(this).val().replace(/[^\d]/g,""));var a=$(this).val(),b=$(this).closest(".order_row"),c=b.find(".label");a!=$(this).data("ovalue")?(c.html($("#ordering_settings").data("labels").update),b.addClass("ordered").removeClass("empty")):a>0?(c.html($("#ordering_settings").data("labels").ordered),b.addClass("ordered").removeClass("empty")):(c.html($("#ordering_settings").data("labels").order),b.removeClass("ordered").addClass("empty"))})}),$(document).on("input propertychange",".order_qty",function(a){validate_signed_integer($(this).val(),4294967295)&&""!=$(this).val()?($(this).closest("span").find("i.minus").addClass("hide"),$(this).closest("span").find("i.plus").removeClass("fa-plus fa-save").addClass("fa-exclamation-circle error")):($(this).closest("span").find("i.minus").addClass("hide"),$(this).closest("span").find("i.plus").removeClass("fa-plus fa-exclamation-circle error").addClass("fa-save"),$(this).addClass("discreet"))});
//# sourceMappingURL=desktop.logged_in.min.js.map