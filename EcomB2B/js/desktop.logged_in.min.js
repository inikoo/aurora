function save_item_qty_change(a){$(a).addClass("fa-spinner fa-spin");var b=$(a).closest("span").find("input");$(a);if(b.prop("readonly",!0),$(a).hasClass("fa-plus")){var c="fa-plus";if(isNaN(b.val())||""==b.val())var d=1;else d=parseFloat(b.val())+1;b.val(d).addClass("discreet")}else if($(a).hasClass("fa-minus")){if(isNaN(b.val())||""==b.val()||0==b.val())var d=0;else d=parseFloat(b.val())-1;console.log(d),b.val(d).addClass("discreet");var c="fa-minus"}else{d=parseFloat(b.val());var c="fa-save"}""==d&&(d=0);var e=$(a).closest("span").data("settings"),f="ar_web_basket.php?tipo=update_item&product_id="+e.item_key+"&order_key="+$("#webpage_data").data("order_key")+"&qty="+d+"&webpage_key="+$("#webpage_data").data("webpage_key")+"&page_section_type=Basket";$.getJSON(f,function(d){if(b.prop("readonly",!1),200==d.state){$(a).closest("span").find("i.plus").removeClass("fa-spinner fa-spin fa-save").addClass("fa-plus"),$(a).closest("span").find("i.minus").removeClass("hide fa-spinner fa-spin").addClass("fa-minus"),console.log(d),console.log(d.order_empty),d.order_empty?$("#basket_go_to_checkout").css({display:"none"}):$("#basket_go_to_checkout").css({display:"block"});for(var e in d.metadata.class_html)$("."+e).html(d.metadata.class_html[e]);$(a).closest("tr").find(".item_amount").html(d.to_charge),d.quantity>0,0==d.quantity&&(d.quantity=""),console.log(d.discounts_data);for(var e in d.discounts_data)console.log(e+": "+d.discounts_data[e]),$("#transaction_deal_info_"+e).html(d.discounts_data[e].deal_info),$("#transaction_item_net_"+e).html(d.discounts_data[e].item_net)}else 201==d.state||400==d.state&&($(a).removeClass("fa-spinner fa-spin fa-disk").addClass(c),swal(d.msg))})}function delayed_save_special_instructions(a,b){window.clearTimeout(a.data("timeout")),a.data("timeout",setTimeout(function(){save_special_instructions()},b))}function save_special_instructions(){var a=new FormData;a.append("tipo","update_order"),a.append("order_key",$("webpage_data").data("order_key")),a.append("field","Order Special Instructions"),a.append("value",$("#_special_instructions").val()),$.ajax({url:"/ar_web_basket.php",type:"POST",data:a,dataType:"json",cache:!1,contentType:!1,processData:!1,complete:function(){},success:function(a){"200"==a.state||"400"==a.state},error:function(){}})}function use_other_credit_card(){$(".credit_cards_list").addClass("hide"),$(".credit_card_form").removeClass("hide"),$(".show_saved_cards_list").removeClass("hide")}function show_saved_cards(){$(".credit_cards_list").removeClass("hide"),$(".credit_card_form").addClass("hide"),$(".show_saved_cards_list").addClass("hide")}function use_this_credit_card(a){console.log(a),$(a).closest("fieldset").find(".row").addClass("hide"),$(a).closest("div.row").find(".delete_this_credit_card").addClass("hide"),$(a).closest("div.row").find(".cancel_use_this_card").removeClass("hide"),$(a).closest("div.row").find(".check_icon_saved_card").removeClass("fa-circle").addClass("fa-check-circle success"),$(".cvv_for_saved_card").addClass("invisible"),$(a).closest("div.row").removeClass("hide").find(".cvv_for_saved_card").removeClass("invisible")}function cancel_use_this_card(a){$(a).closest("div.row").find(".delete_this_credit_card").removeClass("hide"),$(a).closest("div.row").find(".cancel_use_this_card").addClass("hide"),$(".cvv_for_saved_card").addClass("invisible"),$(".check_icon_saved_card").addClass("fa-circle").removeClass("fa-check-circle success"),$(a).closest("fieldset").find(".row").removeClass("hide")}function validate_integer(a,b,c){return $.isNumeric(a)?a>c?{"class":"invalid",type:"too_big"}:b>a?{"class":"invalid",type:"too_small"}:Math.floor(a)!=a?{"class":"invalid",type:"not_integer"}:!1:{"class":"invalid",type:"not_integer"}}$(function(){$(document).on("click",".reminder",function(a){if(!$(this).hasClass("lock")){$(this).addClass("lock");var b=$(this);if(b.hasClass("far")){b.removeClass("far").addClass("fas").attr("title",b.data("label_remove_notification"));var c="ar_web_out_of_stock_reminders.php?tipo=add_out_of_stock_reminder&pid="+b.data("product_id")}else{b.removeClass("fas").addClass("far").attr("title",b.data("label_add_notification"));var c="ar_web_out_of_stock_reminders.php?tipo=remove_out_of_stock_reminder&out_of_stock_reminder_key="+b.data("out_of_stock_reminder_key")}$.getJSON(c,function(a){200==a.state&&(b.removeClass("lock"),b.data("out_of_stock_reminder_key",a.out_of_stock_reminder_key))})}}),$(document).on("click",".favourite",function(a){var b=$(this);b.hasClass("far")?(console.log("add"),b.removeClass("far").addClass("fas").addClass("marked")):(console.log("off"),console.log(b),b.removeClass("fa fas").addClass("far").removeClass("marked"));var c="ar_web_favourites.php?tipo=update_favourite&pid="+$(this).data("product_id")+"&favourite_key="+$(this).data("favourite_key");console.log(c),$.getJSON(c,function(a){console.log(a),b.data("favourite_key",a.favourite_key)})}),$("#logout").on("click",function(){var a=new FormData;a.append("tipo","logout"),a.append("webpage_key",$("#webpage_data").data("webpage_key")),$.ajax({url:"/ar_web_logout.php",type:"POST",data:a,dataType:"json",cache:!1,contentType:!1,processData:!1,complete:function(){},success:function(a){"200"==a.state?location.reload():"400"==a.state&&swal(a.msg)},error:function(){}})}),$(".order_row .label").click(function(){var a=$(this),b=$(this).closest(".order_row");if(!$(this).find("i").hasClass("fa-spinner")){var c=b.find(".order_input"),d=c.val();$(this).find("i").removeClass("fa-hand-pointer").addClass("fa-spinner fa-spin  "),c.prop("readonly",!0);var e=$("#webpage_data").data("order_key");""==e&&(e=0),d>0&&b.addClass("ordered").removeClass("empty");var f="ar_web_basket.php?tipo=update_item&product_id="+$(this).closest(".product_container").data("product_id")+"&order_key="+e+"&qty="+d+"&webpage_key="+$("#webpage_data").data("webpage_key")+"&page_section_type=Family";console.log(f),$.getJSON(f,function(d){if(200==d.state){for(var e in d.metadata.class_html)$("."+e).html(d.metadata.class_html[e]);d.quantity>0?(a.html($("#ordering_settings").data("labels").ordered),b.addClass("ordered").removeClass("empty")):(a.html($("#ordering_settings").data("labels").order),b.removeClass("ordered").addClass("empty")),0==d.quantity&&(d.quantity=""),c.val(d.quantity).data("ovalue",d.quantity).prop("readonly",!1)}else 201==d.state&&(window.location.href="waiting_payment_confirmation.php?referral_key="+$("#webpage_data").data("webpage_key"))})}})}),$(function(){$(".modal-opener").on("click",function(){return $("#sky-form-modal-overlay").length||$("body").append('<div id="sky-form-modal-overlay" class="sky-form-modal-overlay"></div>'),$("#sky-form-modal-overlay").on("click",function(){$("#sky-form-modal-overlay").fadeOut(),$(".sky-form-modal").fadeOut()}),form=$($(this).attr("href")),$("#sky-form-modal-overlay").fadeIn(),form.css("top","50%").css("left","50%").css("margin-top",-form.outerHeight()/2).css("margin-left",-form.outerWidth()/2).fadeIn(),!1}),$(".modal-closer").on("click",function(){return $("#sky-form-modal-overlay").fadeOut(),$(".sky-form-modal").fadeOut(),!1}),$(document).on("click",".payment_method_button",function(a){console.log(this),$(".payment_method_button").addClass("discreet bg-gray-light border-gray-dark").removeClass("bg-blue-light border-blue-dark").css({opacity:.2}),$(this).removeClass("discreet bg-gray-light border-gray-dark").addClass("bg-blue-light border-blue-dark").css({opacity:1}),$(".payment_method_block").addClass("hide"),$("#"+$(this).data("tab")).removeClass("hide")}),$(document).on("click",".ordering_button",function(a){save_item_qty_change(this)}),$(".order_row .label").hover(function(){var a=$(this).closest(".order_row").find(".order_input");""==a.val()&&a.val(1)},function(){var a=$(this).closest(".order_row").find(".order_input");""!=a.data("ovalue")||a.is("[readonly]")||a.val("")}),$(".order_row .label").click(function(){var a=$(this),b=$(this).closest(".order_row");if(!$(this).find("i").hasClass("fa-spinner")){var c=b.find(".order_input"),d=c.val();$(this).find("i").removeClass("fa-hand-pointer").addClass("fa-spinner fa-spin  "),c.prop("readonly",!0),d>0&&b.addClass("ordered").removeClass("empty");var e="ar_web_basket.php?tipo=update_item&product_id="+$(this).closest(".product_container").data("product_id")+"&qty="+d+"&webpage_key="+$("#webpage_data").data("webpage_key")+"&page_section_type=Family";console.log(e),$.getJSON(e,function(d){if(200==d.state){d.order_empty?$("#basket_go_to_checkout").css({display:"none"}):$("#basket_go_to_checkout").css({display:"normal"});for(var e in d.metadata.class_html)$("."+e).html(d.metadata.class_html[e]);d.quantity>0?(a.html($("#ordering_settings").data("labels").ordered),b.addClass("ordered").removeClass("empty")):(a.html($("#ordering_settings").data("labels").order),b.removeClass("ordered").addClass("empty")),0==d.quantity&&(d.quantity=""),c.val(d.quantity).data("ovalue",d.quantity).prop("readonly",!1);for(var e in d.discounts_data)$("#transaction_deal_info_"+e).html(d.discounts_data[e].deal_info),$("#transaction_item_net_"+e).html(d.discounts_data[e].item_net)}else 201==d.state})}}),$(".order_input").on("input propertychange",function(){$(this).val($(this).val().replace(/[^\d]/g,""));var a=$(this).val(),b=$(this).closest(".order_row"),c=b.find(".label");console.log(c),a!=$(this).data("ovalue")?(c.html($("#ordering_settings").data("labels").update),b.addClass("ordered").removeClass("empty")):a>0?(c.html($("#ordering_settings").data("labels").ordered),b.addClass("ordered").removeClass("empty")):(c.html($("#ordering_settings").data("labels").order),b.removeClass("ordered").addClass("empty"))}),$(".label_when_log_out").each(function(a){var b=10,c=$(this),d=c.html().length;if(d>b){var e=parseInt(c.css("font-size")),f=e*b/d;c.css("font-size",f)}}),$(".order_button_text").each(function(a){var b=9,c=$(this),d=c.html().length;if(d>b){var e=parseInt(c.css("font-size")),f=e*b/d;console.log(e),console.log(f),c.css("font-size",f)}}),$(".item_name").each(function(a){var b=50,c=$(this),d=c.html().length;if(d>b){var e=parseInt(c.css("font-size")),f=e*b/d;c.css("font-size",f)}})}),$(document).on("input propertychange",".order_qty",function(a){validate_signed_integer($(this).val(),4294967295)&&""!=$(this).val()?($(this).closest("span").find("i.minus").addClass("hide"),$(this).closest("span").find("i.plus").removeClass("fa-plus fa-save").addClass("fa-exclamation-circle error")):($(this).closest("span").find("i.minus").addClass("hide"),$(this).closest("span").find("i.plus").removeClass("fa-plus exclamation-circle error").addClass("fa-save"),$(this).addClass("discreet"))}),$("#_special_instructions").on("input propertychange",function(a){console.log("xx");var b=100;window.event&&"propertychange"==event.type&&"value"!=event.propertyName||delayed_save_special_instructions($(this),b)});
//# sourceMappingURL=desktop.logged_in.min.js.map