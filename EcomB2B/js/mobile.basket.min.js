function web_toggle_selected_by_customer_charge(a){if(!$(a).hasClass("wait")){if($(a).hasClass("fa-toggle-on"))var b="remove_charge";else var b="add_charge";$(a).addClass("wait fa-spin fa-spinner").removeClass("fa-toggle-on fa-toggle-off");var c=new FormData;c.append("tipo","web_toggle_charge"),c.append("operation",b),c.append("charge_key",$(a).data("charge_key")),$.ajax({url:"/ar_web_basket.php",type:"POST",data:c,dataType:"json",cache:!1,contentType:!1,processData:!1,complete:function(){},success:function(c){if($(a).removeClass("wait"),console.log(c),"200"==c.state){"add_charge"==c.operation?($(a).addClass("fa-toggle-on").removeClass("fa-spinner fa-spin"),$(a).closest("tr").find(".selected_by_customer_charge").html(c.transaction_data.amount),$(".Order_Priority_Icon").removeClass("hide"),$(".priority_label").removeClass("hide")):($(a).addClass("fa-toggle-off").removeClass("fa-spinner fa-spin"),$(a).closest("tr").find(".selected_by_customer_charge").html(""),$(".Order_Priority_Icon").addClass("hide"),$(".priority_label").addClass("hide")),$(".Total_Amount").attr("amount",c.metadata.to_pay),$(".Order_To_Pay_Amount").attr("amount",c.metadata.to_pay),$("#Shipping_Net_Amount_input").val(c.metadata.shipping).attr("ovalue",c.metadata.shipping),$("#Charges_Net_Amount_input").val(c.metadata.charges).attr("ovalue",c.metadata.charges),0==c.metadata.to_pay?($(".Order_Payments_Amount").addClass("hide"),$(".Order_To_Pay_Amount").addClass("hide")):($(".Order_Payments_Amount").removeClass("hide"),$(".Order_To_Pay_Amount").removeClass("hide")),0!=c.metadata.to_pay||0==c.metadata.payments?$(".Order_Paid").addClass("hide"):$(".Order_Paid").removeClass("hide"),c.metadata.to_pay<=0?$(".payment_operation").addClass("hide"):$(".payment_operation").removeClass("hide"),0==c.metadata.to_pay?$(".Order_To_Pay_Amount").removeClass("button").attr("amount",c.metadata.to_pay):$(".Order_To_Pay_Amount").addClass("button").attr("amount",c.metadata.to_pay);for(var d in c.metadata.class_html)$("."+d).html(c.metadata.class_html[d]);for(var d in c.metadata.hide)$("#"+c.metadata.hide[d]).addClass("hide");for(var d in c.metadata.show)$("#"+c.metadata.show[d]).removeClass("hide")}else swal("Error!","","error"),console.log(a),$(a).removeClass("fa-spinner fa-spin"),"remove_charge"==b?$(a).addClass("fa-toggle-on"):$(a).addClass("fa-toggle-off")},error:function(){$(a).removeClass("fa-spinner fa-spin"),"remove_charge"==b?$(a).addClass("fa-toggle-on"):$(a).addClass("fa-toggle-off")}})}}function web_select_deal_component_choose_by_customer(a){var b=$(a).closest(".deal_component_choose_by_customer");if($(a).data("product_id")!=b.data("selected")&&!b.hasClass("wait")){b.addClass("wait"),b.find("i").removeClass("fa-dot-circle").addClass("fa-circle"),$(a).find("i").addClass("fa-spin fa-spinner").removeClass("fa-circle");var c=new FormData;c.append("tipo","web_toggle_deal_component_choose_by_customer"),c.append("deal_component_key",b.data("deal_component_key")),c.append("otdb_key",b.data("otdb_key")),c.append("product_id",$(a).data("product_id")),$.ajax({url:"/ar_web_basket.php",type:"POST",data:c,dataType:"json",cache:!1,contentType:!1,processData:!1,complete:function(){},success:function(c){if(console.log(c),"200"==c.state){$(a).find("i").addClass("fa-spin fa-spinner").removeClass("fa-circle");var d=$("#transaction_item_net_"+c.transaction_deal_data.otf_key).closest("tr");console.log(c.transaction_deal_data.Code),d.find(".item_code").html(c.transaction_deal_data.Code),d.find(".item_description").html(c.transaction_deal_data.Description),b.removeClass("wait").data("selected",c.transaction_deal_data.product_id),$(a).find("i").removeClass("fa-spin fa-spinner").addClass("fa-dot-circle")}},error:function(){$(a).removeClass("fa-spinner fa-spin")}})}}function show_charges_info(){var a="/ar_web_basket.php?tipo=get_charges_info";$.getJSON(a,function(a){200==a.state&&swal({html:!0,title:"",text:a.text})})}$(document).on("change","#order_for_collection",function(a){$(this).is(":checked")?$("#order_delivery_address_fields").addClass("hide"):$("#order_delivery_address_fields").removeClass("hide")});var special_instructions_timeout;$(document).on("input propertychange","#special_instructions",function(a){special_instructions_timeout&&clearTimeout(special_instructions_timeout),value=$(this).val(),special_instructions_timeout=setTimeout(function(){var a=new FormData;a.append("tipo","special_instructions"),a.append("value",value),$.ajax({url:"/ar_web_basket.php",type:"POST",data:a,dataType:"json",cache:!1,contentType:!1,processData:!1,complete:function(){},success:function(a){"200"==a.state||"400"==a.state},error:function(){}})},400)}),$(document).on("change","#order_invoice_country_select",function(){var a=$("#invoice_country_select option:selected"),b="ar_web_addressing.php?tipo=address_format&country_code="+a.val()+"&website_key="+$("#ordering_settings").data("website_key");$.getJSON(b,function(a){$.each(a.hidden_fields,function(a,b){$("#order_invoice_"+b).addClass("hide"),$("#order_invoice_"+b).find("input").addClass("ignore")}),$.each(a.used_fields,function(a,b){$("#invoice_"+b).removeClass("hide"),$("#order_invoice_"+b).find("input").removeClass("ignore")}),$.each(a.labels,function(a,b){$("#order_invoice_"+a).find("input").attr("placeholder",b),$("#order_invoice_"+a).find("b").html(b),$("#order_invoice_"+a).find("label.label").html(b)}),$.each(a.no_required_fields,function(a,b){$("#order_invoice_"+b+" input").rules("remove")}),$.each(a.required_fields,function(a,b){$("#order_invoice_"+b+" input").rules("add",{required:!0})})})}),$(document).on("change","#order_delivery_country_select",function(){var a=$("#order_delivery_country_select option:selected"),b="ar_web_addressing.php?tipo=address_format&country_code="+a.val()+"&website_key="+$("#ordering_settings").data("website_key");$.getJSON(b,function(a){$.each(a.hidden_fields,function(a,b){$("#order_delivery_"+b).addClass("hide"),$("#order_delivery_"+b).find("input").addClass("ignore")}),$.each(a.used_fields,function(a,b){$("#order_delivery_"+b).removeClass("hide"),$("#order_delivery_"+b).find("input").removeClass("ignore")}),$.each(a.labels,function(a,b){$("#order_delivery_"+a).find("input").attr("placeholder",b),$("#order_delivery_"+a).find("b").html(b),$("#order_delivery_"+a).find("label.label").html(b)}),$.each(a.no_required_fields,function(a,b){$("#order_delivery_"+b+" input").rules("remove")}),$.each(a.required_fields,function(a,b){$("#order_delivery_"+b+" input").rules("add",{required:!0})})})});
//# sourceMappingURL=mobile.basket.min.js.map