function save_item_qty_change(a){var b=$(a).closest("div");if(!b.hasClass("wait")){b.addClass("wait");var c=b.find("input");if(c.prop("readonly",!0),$(a).hasClass("fa-plus-circle")){var d="fa-plus-circle";if(isNaN(c.val())||""==c.val())var e=1;else e=parseFloat(c.val())+1;c.val(e).addClass("discreet")}else if($(a).hasClass("fa-minus-circle")){if(isNaN(c.val())||""==c.val()||0==c.val())var e=0;else e=parseFloat(c.val())-1;c.val(e).addClass("discreet");var d="fa-minus"}else{e=parseFloat(c.val());var d="fa-save"}$(a).addClass("fa-circle-o-notch fa-spin"),""==e&&(e=0);var f=b.data("settings"),g="ar_web_basket.php?tipo=update_item&product_id="+f.pid+"&order_key="+$("#webpage_data").data("order_key")+"&qty="+e+"&webpage_key="+$("#webpage_data").data("webpage_key")+"&page_section_type=Basket";console.log(g),$.getJSON(g,function(e){if(c.prop("readonly",!1),b.removeClass("wait"),200==e.state){$(a).removeClass("fa-circle-o-notch fa-spin"),"fa-save"==d&&(b.find(".ordering_button").removeClass("invisible"),b.find(".save").addClass("invisible").css({display:"none"})),e.order_empty?($("#basket_go_to_checkout").css({display:"none"}),$("#basket_continue_shopping").css({display:"block"})):($("#basket_go_to_checkout").css({display:"block"}),$("#basket_continue_shopping").css({display:"none"})),c.val(e.quantity).removeClass("discreet");for(var g in e.metadata.class_html)$("."+g).html(e.metadata.class_html[g]);void 0!=f.basket&&$(a).closest("tr").find(".item_amount").html(e.to_charge),e.quantity>0,0==e.quantity&&(e.quantity="")}else 201==e.state?window.location.href="waiting_payment_confirmation.php?referral_key="+$("#webpage_data").data("webpage_key"):400==e.state&&($(a).removeClass("fa-spinner fa-spin fa-disk").addClass(d),swal(e.msg))})}}function validate_signed_integer(a,b){return $.isNumeric(a)?a>b?{"class":"invalid",type:"too_big"}:0>a?{"class":"invalid",type:"negative"}:Math.floor(a)!=a?{"class":"invalid",type:"not_integer"}:!1:{"class":"invalid",type:"not_integer"}}$(function(){$(".reminder").click(function(){if(!$(this).hasClass("lock")){$(this).addClass("lock");var a=$(this);if(a.hasClass("fa-envelope")){a.removeClass("fa-envelope").addClass("fa-envelope").addClass("marked").attr("title","{t}Click to remove notification{/t}");var b="ar_reminders.php?tipo=send_reminder&pid="+$(this).closest(".product_showcase").data("product_id")}else{a.removeClass("fa-envelope").addClass("fa-envelope").removeClass("marked").attr("title","{t}Click to be notified by email{/t}");var b="ar_reminders.php?tipo=cancel_send_reminder&esr_key="+$(this).data("reminder_key")}element=$(this),console.log(b),$.getJSON(b,function(a){console.log(a),200==a.state&&(element.removeClass("lock"),element.data("reminder_key",a.id))})}}),$(".favourite").click(function(){var a=$(this);console.log(a),console.log(a),a.hasClass("far")?(console.log("add"),a.removeClass("far").addClass("fa").addClass("marked")):(console.log("off"),a.removeClass("fa").addClass("far").removeClass("marked"));var b="ar_web_basket.php?tipo=update_favourite&pid="+$(this).data("product_id")+"&customer_key="+$("#webpage_data").data("customer_key")+"&favourite_key="+$(this).data("favourite_key");console.log(b),$.getJSON(b,function(b){console.log(b),a.data("favourite_key",b.favourite_key)})}),$("#logout").on("click",function(){var a=new FormData;a.append("tipo","logout"),a.append("webpage_key",$("#webpage_data").data("webpage_key")),$.ajax({url:"/ar_web_logout.php",type:"POST",data:a,dataType:"json",cache:!1,contentType:!1,processData:!1,complete:function(){},success:function(a){"200"==a.state?location.reload():"400"==a.state&&swal(a.msg)},error:function(){}})})}),$(document).on("input propertychange",".order_qty",function(a){$(this).closest("div").find(".ordering_button").addClass("invisible"),$(this).closest("div").find(".save").removeClass("invisible").css({display:"inline"}),validate_signed_integer($(this).val(),4294967295)&&""!=$(this).val()?$(this).addClass("error"):$(this).removeClass("error")});
//# sourceMappingURL=mobile.logged_in.min.js.map